
import streamlit as st
import random

# ì§ˆë¬¸ ìœ í˜•ê³¼ ì§ˆë¬¸ ë°ì´í„°
question_bank = {
    "ê°ì • íƒìƒ‰": [
        "ìš”ì¦˜ ìì£¼ ëŠë¼ëŠ” ê°ì •ì€ ë­ì•¼?",
        "ê·¸ ê°ì •ì€ ì–¸ì œ ê°€ì¥ ê°•í•˜ê²Œ ëŠê»´ì ¸?",
        "ê°ì •ì„ ë§ë¡œ í‘œí˜„í•˜ëŠ” ê²Œ ì–´ë ¤ìš¸ ë•Œë„ ìˆë‹ˆ?"
    ],
    "ìê¸°ì´í•´": [
        "ë‚˜ëŠ” ì–´ë–¤ ì‚¬ëŒì´ë¼ê³  ìƒê°í•´?",
        "ë‚˜ë¥¼ ê°€ì¥ ì˜ í‘œí˜„í•˜ëŠ” ë§ì€ ë¬´ì—‡ì¼ê¹Œ?",
        "ë‚´ê°€ ê°€ì¥ í¸ì•ˆí•˜ë‹¤ê³  ëŠë‚„ ë•ŒëŠ” ì–¸ì œì•¼?"
    ],
    "ê´€ê³„/ì‚¬íšŒì„±": [
        "ì¹œêµ¬ë“¤ê³¼ ìˆì„ ë•Œ ê°€ì¥ í¸í•  ë•ŒëŠ” ì–¸ì œì•¼?",
        "ê°€ì¡± ì¤‘ì— ëˆ„êµ¬ì™€ ê°€ì¥ ì¹œí•˜ë‹¤ê³  ëŠê»´?",
        "ë‹¤ë¥¸ ì‚¬ëŒê³¼ ë‹¤íˆ° ì  ìˆì„ê¹Œ? ê·¸ë•Œ ê¸°ë¶„ì€ ì–´ë• ì–´?"
    ],
    "ìŠ¤íŠ¸ë ˆìŠ¤/ë¶ˆì•ˆ": [
        "ìµœê·¼ì— ìŠ¤íŠ¸ë ˆìŠ¤ ë°›ì•˜ë˜ ì¼ì´ ìˆì—ˆì–´?",
        "ìŠ¤íŠ¸ë ˆìŠ¤ë¥¼ ë°›ì„ ë•Œ ë„ˆë§Œì˜ í•´ì†Œ ë°©ë²•ì´ ìˆì–´?",
        "ë¶ˆì•ˆí•  ë•Œ ì£¼ë¡œ ì–´ë–¤ ìƒê°ì´ ë“¤ì–´?"
    ],
    "ì§„ë¡œ/ë¯¸ë˜": [
        "ì–´ë–¤ ì¼ì„ í•  ë•Œ ì‹œê°„ì´ ë¹¨ë¦¬ ê°€ëŠ” ê²ƒ ê°™ì•„?",
        "ë¯¸ë˜ì— ê¼­ í•´ë³´ê³  ì‹¶ì€ ê²Œ ìˆì–´?",
        "ì§€ê¸ˆ ê¿ˆê¾¸ëŠ” ì§ì—…ì´ ìˆë‹ˆ?"
    ],
    "ìì¡´ê°": [
        "ìŠ¤ìŠ¤ë¡œ ì¹­ì°¬í•˜ê³  ì‹¶ì€ ì ì´ ìˆì–´?",
        "â€œë‚˜ëŠ” ê´œì°®ì€ ì‚¬ëŒì´ì•¼â€ë¼ëŠ” ë§ì„ ë¯¿ì„ ìˆ˜ ìˆì–´?",
        "ë‚´ê°€ ë‚˜ë¥¼ ë¯¿ì§€ ëª»í•˜ëŠ” ìˆœê°„ì€ ì–¸ì œì˜€ì–´?"
    ],
    "ë¬¸ì œí•´ê²°/ê°ˆë“±": [
        "ì¹œêµ¬ë‘ ë‹¤íˆ´ ë•Œ ë³´í†µ ì–´ë–»ê²Œ í•´ê²°í•´?",
        "ë¬¸ì œê°€ ìƒê¸°ë©´ ëˆ„êµ¬ì—ê²Œ ë¨¼ì € ë§í•´?",
        "ê°ˆë“±ì„ í”¼í•˜ê³  ì‹¶ì„ ë•Œ ë„ˆëŠ” ì–´ë–»ê²Œ í•´?"
    ]
}

# Streamlit ì•± ì„¤ì •
st.set_page_config(page_title="ë§ˆìŒì—´ê¸° ì§ˆë¬¸íˆ´", layout="wide")
st.title("ğŸ’¬ ë§ˆìŒì—´ê¸° ì§ˆë¬¸íˆ´")
st.caption("ì²­ì†Œë…„ì˜ ë§ˆìŒì„ ì—¬ëŠ” ë”°ëœ»í•œ ì§ˆë¬¸ ë„ìš°ë¯¸ ğŸŒ±")

# ì§ˆë¬¸ ìœ í˜• ì„ íƒ
st.markdown("### ğŸ§  ì§ˆë¬¸ ìœ í˜•ì„ ì„ íƒí•˜ì„¸ìš”")
question_type = st.selectbox("ìœ í˜• ì„ íƒ", list(question_bank.keys()))

# ì§ˆë¬¸ í‘œì‹œ ë° ì‹¬ê°ë„ í‰ê°€
if question_type:
    st.markdown(f"### ğŸ“˜ '{question_type}' ì§ˆë¬¸ ëª©ë¡ ë° ê°ì • ì‹¬ê°ë„ í‰ê°€")
    responses = []

    for i, question in enumerate(question_bank[question_type], 1):
        st.markdown(f"**{i}. {question}**")
        severity = st.slider(
            f"â†’ ì´ ì§ˆë¬¸ì— ëŒ€í•œ ê°ì •ì˜ ì‹¬ê°ë„ëŠ”? (0: ì „í˜€ ì—†ìŒ ~ 10: ë§¤ìš° ì‹¬ê°)",
            0, 10, 0, key=f"slider_{i}"
        )
        responses.append({"ì§ˆë¬¸": question, "ì‹¬ê°ë„": severity})

    # ê°ì • ìš”ì•½ ê²°ê³¼ ë³´ê¸°
    if st.button("ğŸ“Š ê°ì • ì‹¬ê°ë„ ìš”ì•½ ë³´ê¸°"):
        st.markdown("### ğŸ“ ê°ì • ì‹¬ê°ë„ ê²°ê³¼")
        for item in responses:
            st.write(f"- **{item['ì§ˆë¬¸']}** â†’ ì‹¬ê°ë„: {item['ì‹¬ê°ë„']}ì ")

        # ì‹¬ê°ë„ ë†’ì€ ì§ˆë¬¸ ê°•ì¡°
        st.markdown("### ğŸš¨ ì‹¬ê°ë„ê°€ ë†’ì€ ì§ˆë¬¸")
        high_risk = [r for r in responses if r['ì‹¬ê°ë„'] >= 7]
        if high_risk:
            for r in high_risk:
                st.warning(f"âš ï¸ **{r['ì§ˆë¬¸']}** â†’ {r['ì‹¬ê°ë„']}ì ")
        else:
            st.success("ì‹¬ê°ë„ê°€ ë†’ì€ ì§ˆë¬¸ì€ ì—†ìŠµë‹ˆë‹¤.")

    # ë¬´ì‘ìœ„ ì§ˆë¬¸ ì¶”ì²œ
    if st.button("ğŸ² ë¬´ì‘ìœ„ ì§ˆë¬¸ ì¶”ì²œ"):
        st.info(f"ëœë¤ ì§ˆë¬¸: **{random.choice(question_bank[question_type])}**")
      emotion_icons = {
    "ğŸ˜Š ê¸°ì¨": "ğŸ˜Š", 
    "ğŸ˜ ë¬´ê¸°ë ¥": "ğŸ˜", 
    "ğŸ˜¢ ìŠ¬í””": "ğŸ˜¢"
}

selected_emotion = st.radio("ì§€ê¸ˆ ê°ì •ì— ê°€ì¥ ê°€ê¹Œìš´ ì´ëª¨ì§€ëŠ”?", list(emotion_icons.values()))

